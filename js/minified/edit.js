var a_id=1;$(document).ready(function(){RefreshQuestionNumbers();refreshAnswerLetters(0);refreshAnswerLetters(1);$("#submitreset").css({top:($(window).scrollTop()+$(window).height()-$("#submitreset").outerHeight())+"px"},{queue:false,duration:350});$("#createSetForm").validate()});$(window).scroll(function(){$("#controlpanel").animate({top:$(window).scrollTop()+"px"},{queue:false,duration:350});$("#submitreset").animate({top:($(window).scrollTop()+$(window).height()-$("#submitreset").outerHeight())+"px"},{queue:false,duration:350});$("#messagebox").animate({top:$(window).scrollTop()+100+"px"},{queue:false,duration:350})});function AddQuestion(){if(typeof AddQuestion.q_number=="undefined"){AddQuestion.q_number=0}if(typeof AddQuestion.nextQIndex=="undefined"){AddQuestion.nextQIndex=1}var a=AddQuestion.nextQIndex;$("#question_space").append("<div id='question"+(a)+"' class='full_question'><table class='questionsform'>	<tr>		<td valign='top'><span name='qNumberLabel'></span><br/>Prompt:</td>		<td><textarea name='data[Question]["+(a)+"][prompt]' rows='10' cols='40'></textarea></td>		<td valign='bottom'>Correct Choice</td>	</tr>\n</table><table  name='answerSpace"+(a)+"'>\n<tr>		<td valign='top'><span class='aLetterLabel'>A</span></td>		<td><input type='text' name='data[Question]["+(a)+"][Answer]["+(a_id)+"][prompt]' />		<td align='center'><input type='radio' name='data[Question]["+(a)+"][Answer][correct]' value='"+(a_id++)+"' CHECKED /></td>	</tr>	<tr>		<td valign='top'><span class='aLetterLabel'>B</span></td>		<td><input type='text' name='data[Question]["+(a)+"][Answer]["+(a_id)+"][prompt]' />\n		<td align='center'><input type='radio' name='data[Question]["+(a)+"][Answer][correct]' value='"+(a_id++)+"' /></td>	</tr></table>\n<table><tr>		<td valign='top'>Explanation:</td>		<td><textarea name='data[Question]["+(a)+"][explanation]' rows='2' cols='20'></textarea></td>		<td></td>	</tr></table><input type='button' value='Remove Question' name='remove_q' onclick='RemoveQuestion(\"#question"+(a)+"\");'> <input type='button' value='Add Answer' name='add_a' onclick='addAnswer("+(a)+");'> </div>	");$("#question"+a).slideDown("slow");AddQuestion.q_number++;AddQuestion.nextQIndex++;document.getElementById("q_number").innerHTML=AddQuestion.q_number;refreshQuestionNumbers()}function addAnswer(a){$("[name=answerSpace"+a+"]").append("<tr id='answer"+(a_id)+"'>		<td valign='top'><span class='aLetterLabel'></span></td>		<td><input type='text' name='data[Question]["+(a)+"][Answer]["+(a_id)+"][prompt]' /></td>\n		<td align='center'><input type='radio' name='data[Question]["+(a)+"][Answer][correct]' value='"+(a_id)+"'>\n<input type='button' onclick='removeAnswer("+(a_id++)+","+(a)+");' value='del' /></td></tr>");refreshAnswerLetters(a)}function RemoveQuestion(a){AddQuestion.q_number--;document.getElementById("q_number").innerHTML=AddQuestion.q_number;$(a).slideUp("fast",function(){$(a).remove();RefreshQuestionNumbers()})}function removeAnswer(b,a){$("#answer"+b).remove();refreshAnswerLetters(a)}function RefreshQuestionNumbers(){var a=1;var b=$("span[name='qNumberLabel']");for(var c=0;c<b.length;c++){b[c].innerHTML="Question "+a;a++}}function refreshAnswerLetters(f){var a=65;var b=$("table[name='answerSpace"+(f)+"']");var d=$(b).find(".aLetterLabel");for(var e=0;e<d.length;e++){$(d[e]).html(itoc(a++))}}function SaveQuiz(){$.post("save",$("#createSetForm").serialize(),function(a){if(a.length>0){$("#messagebox").html(a);$("#messagebox").slideDown("fast");if(a.search(/Congratulations/)!=-1){}}else{$("#messagebox").slideUp("fast")}})}function clearQuiz(){var b=document.getElementsByTagName("input");var a=document.getElementsByTagName("textarea");for(var c=0;c<b.length;c++){if(b[c].type.indexOf("text")==0){b[c].value=""}}for(var c=0;c<a.length;c++){a[c].value=""}}function itoc(a){return String.fromCharCode(a)};