(function(d,e,f){d.fn.jScrollPane=function(a){function c(bq,bb){var bp,a9=this,a1,bE,aI,bC,a6,a0,aF,aM,bn,bP,bw,aU,bg,aV,aT,aZ,a5,bA,a2,aK,bt,bz,bJ,bB,bk,aR,bx,br,aG,bv,bM,aW,bQ,bF=true,ba=true,bN=false,aS=false,aX=d.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";bM=bq.css("paddingTop")+" "+bq.css("paddingRight")+" "+bq.css("paddingBottom")+" "+bq.css("paddingLeft");aW=(parseInt(bq.css("paddingLeft"))||0)+(parseInt(bq.css("paddingRight"))||0);by(bb);function by(g){var j,k,l,h,i,m;bp=g;if(a1==f){bq.css({overflow:"hidden",padding:0});bE=bq.innerWidth()+aW;aI=bq.innerHeight();bq.width(bE);a1=d('<div class="jspPane" />').wrap(d('<div class="jspContainer" />').css({width:bE+"px",height:aI+"px"}));bq.wrapInner(a1.parent());bC=bq.find(">.jspContainer");a1=bC.find(">.jspPane");a1.css("padding",bM)}else{bq.css("width","");m=bq.outerWidth()+aW!=bE||bq.outerHeight()!=aI;if(m){bE=bq.innerWidth()+aW;aI=bq.innerHeight();bC.css({width:bE+"px",height:aI+"px"})}bQ=a1.innerWidth();if(!m&&a1.outerWidth()==a6&&a1.outerHeight()==a0){if(bP||bn){a1.css("width",bQ+"px");bq.css("width",(bQ+aW)+"px")}return}a1.css("width","");bq.css("width",(bE)+"px");bC.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}j=a1.clone().css("position","absolute");k=d('<div style="width:1px; position: relative;" />').append(j);d("body").append(k);a6=Math.max(a1.outerWidth(),j.outerWidth());k.remove();a0=a1.outerHeight();aF=a6/bE;aM=a0/aI;bn=aM>1;bP=aF>1;if(!(bP||bn)){bq.removeClass("jspScrollable");a1.css({top:0,width:bC.width()-aW});aP();bo();a8();aH();bG()}else{bq.addClass("jspScrollable");l=bp.maintainPosition&&(bg||aZ);if(l){h=bh();i=bl()}bO();s();bm();if(l){bc(h);bd(i)}be();bI();if(bp.enableKeyboardNavigation){a7()}if(bp.clickOnTrack){aN()}bs();if(bp.hijackInternalLinks){aQ()}}if(bp.autoReinitialise&&!bv){bv=setInterval(function(){by(bp)},bp.autoReinitialiseDelay)}else{if(!bp.autoReinitialise&&bv){clearInterval(bv)}}bq.trigger("jsp-initialised",[bP||bn])}function bO(){if(bn){bC.append(d('<div class="jspVerticalBar" />').append(d('<div class="jspCap jspCapTop" />'),d('<div class="jspTrack" />').append(d('<div class="jspDrag" />').append(d('<div class="jspDragTop" />'),d('<div class="jspDragBottom" />'))),d('<div class="jspCap jspCapBottom" />')));a5=bC.find(">.jspVerticalBar");bA=a5.find(">.jspTrack");bw=bA.find(">.jspDrag");if(bp.showArrows){bz=d('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",bf(0,-1)).bind("click.jsp",bj);bJ=d('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",bf(0,1)).bind("click.jsp",bj);if(bp.arrowScrollOnHover){bz.bind("mouseover.jsp",bf(0,-1,bz));bJ.bind("mouseover.jsp",bf(0,1,bJ))}bD(bA,bp.verticalArrowPositions,bz,bJ)}aK=aI;bC.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){aK-=d(this).outerHeight()});bw.hover(function(){bw.addClass("jspHover")},function(){bw.removeClass("jspHover")}).bind("mousedown.jsp",function(g){d("html").bind("dragstart.jsp selectstart.jsp",function(){return false});bw.addClass("jspActive");var h=g.pageY-bw.position().top;d("html").bind("mousemove.jsp",function(i){a4(i.pageY-h,false)}).bind("mouseup.jsp mouseleave.jsp",bu);return false});aO()}}function aO(){bA.height(aK+"px");bg=0;a2=bp.verticalGutter+bA.outerWidth();a1.width(bE-a2-aW);if(a5.position().left==0){a1.css("margin-left",a2+"px")}}function s(){if(bP){bC.append(d('<div class="jspHorizontalBar" />').append(d('<div class="jspCap jspCapLeft" />'),d('<div class="jspTrack" />').append(d('<div class="jspDrag" />').append(d('<div class="jspDragLeft" />'),d('<div class="jspDragRight" />'))),d('<div class="jspCap jspCapRight" />')));bB=bC.find(">.jspHorizontalBar");bk=bB.find(">.jspTrack");aV=bk.find(">.jspDrag");if(bp.showArrows){br=d('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",bf(-1,0)).bind("click.jsp",bj);aG=d('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",bf(1,0)).bind("click.jsp",bj);if(bp.arrowScrollOnHover){br.bind("mouseover.jsp",bf(-1,0,br));aG.bind("mouseover.jsp",bf(1,0,aG))}bD(bk,bp.horizontalArrowPositions,br,aG)}aV.hover(function(){aV.addClass("jspHover")},function(){aV.removeClass("jspHover")}).bind("mousedown.jsp",function(g){d("html").bind("dragstart.jsp selectstart.jsp",function(){return false});aV.addClass("jspActive");var h=g.pageX-aV.position().left;d("html").bind("mousemove.jsp",function(i){a3(i.pageX-h,false)}).bind("mouseup.jsp mouseleave.jsp",bu);return false});aR=bC.innerWidth();bH()}else{}}function bH(){bC.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){aR-=d(this).outerWidth()});bk.width(aR+"px");aZ=0}function bm(){if(bP&&bn){var g=bk.outerHeight(),h=bA.outerWidth();aK-=g;d(bB).find(">.jspCap:visible,>.jspArrow").each(function(){aR+=d(this).outerWidth()});aR-=h;aI-=h;bE-=g;bk.parent().append(d('<div class="jspCorner" />').css("width",g+"px"));aO();bH()}if(bP){a1.width((bC.outerWidth()-aW)+"px")}a0=a1.outerHeight();aM=a0/aI;if(bP){bx=1/aF*aR;if(bx>bp.horizontalDragMaxWidth){bx=bp.horizontalDragMaxWidth}else{if(bx<bp.horizontalDragMinWidth){bx=bp.horizontalDragMinWidth}}aV.width(bx+"px");aT=aR-bx;bK(aZ)}if(bn){bt=1/aM*aK;if(bt>bp.verticalDragMaxHeight){bt=bp.verticalDragMaxHeight}else{if(bt<bp.verticalDragMinHeight){bt=bp.verticalDragMinHeight}}bw.height(bt+"px");aU=aK-bt;bL(bg)}}function bD(h,m,i,j){var k="before",g="after",l;if(m=="os"){m=/Mac/.test(navigator.platform)?"after":"split"}if(m==k){g=m}else{if(m==g){k=m;l=i;i=j;j=l}}h[k](i)[g](j)}function bf(h,i,g){return function(){bi(h,i,this,g);this.blur();return false}}function bi(g,i,k,l){k=d(k).addClass("jspActive");var m,j=function(){if(g!=0){a3(aZ+g*bp.arrowButtonSpeed,false)}if(i!=0){a4(bg+i*bp.arrowButtonSpeed,false)}},h=setInterval(j,bp.arrowRepeatFreq);j();m=l==f?"mouseup.jsp":"mouseout.jsp";l=l||d("html");l.bind(m,function(){k.removeClass("jspActive");clearInterval(h);l.unbind(m)})}function aN(){aH();if(bn){bA.bind("mousedown.jsp",function(g){if(g.originalTarget==f||g.originalTarget==g.currentTarget){var h=d(this),j=setInterval(function(){var l=h.offset(),k=g.pageY-l.top;if(bg+bt<k){a4(bg+bp.trackClickSpeed)}else{if(k<bg){a4(bg-bp.trackClickSpeed)}else{i()}}},bp.trackClickRepeatFreq),i=function(){j&&clearInterval(j);j=null;d(document).unbind("mouseup.jsp",i)};d(document).bind("mouseup.jsp",i);return false}})}if(bP){bk.bind("mousedown.jsp",function(g){if(g.originalTarget==f||g.originalTarget==g.currentTarget){var h=d(this),j=setInterval(function(){var l=h.offset(),k=g.pageX-l.left;if(aZ+bx<k){a3(aZ+bp.trackClickSpeed)}else{if(k<aZ){a3(aZ-bp.trackClickSpeed)}else{i()}}},bp.trackClickRepeatFreq),i=function(){j&&clearInterval(j);j=null;d(document).unbind("mouseup.jsp",i)};d(document).bind("mouseup.jsp",i);return false}})}}function aH(){bk&&bk.unbind("mousedown.jsp");bA&&bA.unbind("mousedown.jsp")}function bu(){d("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");bw&&bw.removeClass("jspActive");aV&&aV.removeClass("jspActive")}function a4(h,g){if(!bn){return}if(h<0){h=0}else{if(h>aU){h=aU}}if(g==f){g=bp.animateScroll}if(g){a9.animate(bw,"top",h,bL)}else{bw.css("top",h);bL(h)}}function bL(i){if(i==f){i=bw.position().top}bC.scrollTop(0);bg=i;var k=bg==0,h=bg==aU,g=i/aU,j=-g*(a0-aI);if(bF!=k||bN!=h){bF=k;bN=h;bq.trigger("jsp-arrow-change",[bF,bN,ba,aS])}aJ(k,h);a1.css("top",j);bq.trigger("jsp-scroll-y",[-j,k,h])}function a3(g,h){if(!bP){return}if(g<0){g=0}else{if(g>aT){g=aT}}if(h==f){h=bp.animateScroll}if(h){a9.animate(aV,"left",g,bK)}else{aV.css("left",g);bK(g)}}function bK(i){if(i==f){i=aV.position().left}bC.scrollTop(0);aZ=i;var k=aZ==0,g=aZ==aT,h=i/aT,j=-h*(a6-bE);if(ba!=k||aS!=g){ba=k;aS=g;bq.trigger("jsp-arrow-change",[bF,bN,ba,aS])}aL(k,g);a1.css("left",j);bq.trigger("jsp-scroll-x",[-j,k,g])}function aJ(g,h){if(bp.showArrows){bz[g?"addClass":"removeClass"]("jspDisabled");bJ[h?"addClass":"removeClass"]("jspDisabled")}}function aL(g,h){if(bp.showArrows){br[g?"addClass":"removeClass"]("jspDisabled");aG[h?"addClass":"removeClass"]("jspDisabled")}}function bd(i,h){var g=i/(a0-aI);a4(g*aU,h)}function bc(h,i){var g=h/(a6-bE);a3(g*aT,i)}function aY(l,n,k){var g,i,p=0,j,o,m;try{g=d(l)}catch(h){return}i=g.outerHeight();bC.scrollTop(0);while(!g.is(".jspPane")){p+=g.position().top;g=g.offsetParent();if(/^body|html$/i.test(g[0].nodeName)){return}}j=bl();o=j+aI;if(p<j||n){m=p-bp.verticalGutter}else{if(p+i>o){m=p-aI+i+bp.verticalGutter}}if(m){bd(m,k)}}function bh(){return -a1.position().left}function bl(){return -a1.position().top}function bI(){bC.unbind(aX).bind(aX,function(l,k,g,i){var h=aZ,j=bg;a3(aZ+g*bp.mouseWheelSpeed,false);a4(bg-i*bp.mouseWheelSpeed,false);return h==aZ&&j==bg})}function aP(){bC.unbind(aX)}function bj(){return false}function be(){a1.unbind("focusin.jsp").bind("focusin.jsp",function(g){if(g.target===a1[0]){return}aY(g.target,false)})}function bo(){a1.unbind("focusin.jsp")}function a7(){var g,h;bq.attr("tabindex",0).unbind("keydown.jsp").bind("keydown.jsp",function(k){if(k.target!==bq[0]){return}var i=aZ,j=bg,l=g?2:16;switch(k.keyCode){case 40:a4(bg+l,false);break;case 38:a4(bg-l,false);break;case 34:case 32:bd(bl()+Math.max(32,aI)-16);break;case 33:bd(bl()-aI+16);break;case 35:bd(a0-aI);break;case 36:bd(0);break;case 39:a3(aZ+l,false);break;case 37:a3(aZ-l,false);break}if(!(i==aZ&&j==bg)){g=true;clearTimeout(h);h=setTimeout(function(){g=false},260);return false}});if(bp.hideFocus){bq.css("outline","none");if("hideFocus" in bC[0]){bq.attr("hideFocus",true)}}else{bq.css("outline","");if("hideFocus" in bC[0]){bq.attr("hideFocus",false)}}}function a8(){bq.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp")}function bs(){if(location.hash&&location.hash.length>1){var g,h;try{g=d(location.hash)}catch(i){return}if(g.length&&a1.find(g)){if(bC.scrollTop()==0){h=setInterval(function(){if(bC.scrollTop()>0){aY(location.hash,true);d(document).scrollTop(bC.position().top);clearInterval(h)}},50)}else{aY(location.hash,true);d(document).scrollTop(bC.position().top)}}}}function bG(){d("a.jspHijack").unbind("click.jsp-hijack").removeClass("jspHijack")}function aQ(){bG();d("a[href^=#]").addClass("jspHijack").bind("click.jsp-hijack",function(){var h=this.href.split("#"),g;if(h.length>1){g=h[1];if(g.length>0&&a1.find("#"+g).length>0){aY("#"+g,true);return false}}})}d.extend(a9,{reinitialise:function(g){g=d.extend({},g,bp);by(g)},scrollToElement:function(g,h,i){aY(g,h,i)},scrollTo:function(g,i,h){bc(g,h);bd(i,h)},scrollToX:function(g,h){bc(g,h)},scrollToY:function(h,g){bd(h,g)},scrollBy:function(h,i,g){a9.scrollByX(h,g);a9.scrollByY(i,g)},scrollByX:function(j,h){var i=bh()+j,g=i/(a6-bE);a3(g*aT,h)},scrollByY:function(j,h){var i=bl()+j,g=i/(a0-aI);a4(g*aU,h)},animate:function(i,k,j,g){var h={};h[k]=j;i.animate(h,{duration:bp.animateDuration,ease:bp.animateEase,queue:false,step:g})},getContentPositionX:function(){return bh()},getContentPositionY:function(){return bl()},getIsScrollableH:function(){return bP},getIsScrollableV:function(){return bn},getContentPane:function(){return a1},scrollToBottom:function(g){a4(aU,g)},hijackInternalLinks:function(){aQ()}})}a=d.extend({},d.fn.jScrollPane.defaults,a);var b;this.each(function(){var j=d(this),i=j.data("jsp");if(i){i.reinitialise(a)}else{i=new c(j,a);j.data("jsp",i)}b=b?b.add(j):j});return b};d.fn.jScrollPane.defaults={showArrows:false,maintainPosition:true,clickOnTrack:true,autoReinitialise:false,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,animateScroll:false,animateDuration:300,animateEase:"linear",hijackInternalLinks:false,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:10,arrowButtonSpeed:10,arrowRepeatFreq:100,arrowScrollOnHover:false,trackClickSpeed:30,trackClickRepeatFreq:100,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:true,hideFocus:false}})(jQuery,this);